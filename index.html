<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® AIäººç”Ÿæ¨¡æ‹Ÿå™¨ - ä½ çš„é€‰æ‹©å†³å®šå‘½è¿</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); min-height: 100vh; color: #e8e8e8; }
        .game-container { max-width: 900px; margin: 0 auto; padding: 20px; min-height: 100vh; }
        .status-bar { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: 10px; margin-bottom: 20px; }
        .stat-item { background: rgba(0,0,0,0.3); border-radius: 10px; padding: 12px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .stat-label { font-size: 10px; color: #888; margin-bottom: 5px; }
        .stat-value { font-size: 18px; font-weight: bold; }
        .stat-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 5px; overflow: hidden; }
        .stat-fill { height: 100%; border-radius: 2px; transition: width 0.3s; }
        .main-area { display: grid; grid-template-columns: 250px 1fr; gap: 20px; }
        @media (max-width: 768px) { .main-area { grid-template-columns: 1fr; } }
        .left-panel { display: flex; flex-direction: column; gap: 15px; }
        .panel { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .panel-title { font-size: 12px; color: #00ff88; margin-bottom: 10px; text-transform: uppercase; }
        .avatar { width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 40px; background: linear-gradient(135deg, #667eea, #764ba2); }
        .char-name { text-align: center; font-size: 16px; font-weight: bold; }
        .char-info { text-align: center; font-size: 11px; color: #888; margin-bottom: 10px; }
        .skills-list { display: flex; flex-wrap: wrap; gap: 5px; }
        .skill-tag { padding: 4px 8px; background: rgba(255,255,255,0.1); border-radius: 12px; font-size: 10px; }
        .event-log { max-height: 200px; overflow-y: auto; font-size: 11px; }
        .event-item { padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .center-area { display: flex; flex-direction: column; gap: 15px; }
        .story-panel { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 20px; border: 1px solid rgba(255,255,255,0.1); flex: 1; }
        .scene-image { width: 100%; height: 120px; background: linear-gradient(135deg, #2d3436, #636e72); border-radius: 8px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; font-size: 50px; }
        .npc-area { display: flex; align-items: flex-start; gap: 15px; margin-bottom: 15px; }
        .npc-avatar { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #fdcb6e, #e17055); display: flex; align-items: center; justify-content: center; font-size: 24px; flex-shrink: 0; }
        .dialogue-box { flex: 1; background: rgba(255,255,255,0.05); border-radius: 10px; padding: 15px; }
        .npc-name { font-size: 12px; color: #ffd700; margin-bottom: 5px; }
        .dialogue-text { font-size: 14px; line-height: 1.6; }
        .choices-panel { background: rgba(0,0,0,0.3); border-radius: 12px; padding: 15px; border: 1px solid rgba(255,255,255,0.1); }
        .choices-title { font-size: 12px; color: #00ccff; margin-bottom: 10px; }
        .choice-btn { display: block; width: 100%; padding: 12px 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #fff; text-align: left; cursor: pointer; margin-bottom: 8px; transition: all 0.3s; }
        .choice-btn:hover { background: rgba(0,255,136,0.1); border-color: #00ff88; transform: translateX(5px); }
        .result-box { background: rgba(0,255,136,0.1); border: 1px solid #00ff88; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .result-title { color: #00ff88; font-size: 14px; margin-bottom: 10px; }
        .result-text { font-size: 13px; line-height: 1.6; }
        .free-input { margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); }
        .free-input input { width: 100%; padding: 10px 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: #fff; font-size: 14px; }
        .free-input input:focus { outline: none; border-color: #00ff88; }
        .free-input button { margin-top: 10px; padding: 10px 20px; background: linear-gradient(135deg, #00ff88, #00ccff); border: none; border-radius: 8px; color: #000; font-weight: bold; cursor: pointer; }
        .year-display { text-align: center; font-size: 24px; font-weight: bold; color: #ffd700; margin-bottom: 15px; }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="year-display" id="yearDisplay">ğŸ‚ ç¬¬ 0 å¹´</div>
        <div class="status-bar">
            <div class="stat-item"><div class="stat-label">å¥åº·</div><div class="stat-value" id="health">100</div><div class="stat-bar"><div class="stat-fill" id="healthBar" style="width:100%; background:#00ff88"></div></div></div>
            <div class="stat-item"><div class="stat-label">é‡‘é’±</div><div class="stat-value" id="money">Â¥0</div></div>
            <div class="stat-item"><div class="stat-label">æ™ºåŠ›</div><div class="stat-value" id="intelligence">50</div><div class="stat-bar"><div class="stat-fill" id="intBar" style="width:50%; background:#00ccff"></div></div></div>
            <div class="stat-item"><div class="stat-label">é­…åŠ›</div><div class="stat-value" id="charm">50</div><div class="stat-bar"><div class="stat-fill" id="charmBar" style="width:50%; background:#ff6b6b"></div></div></div>
            <div class="stat-item"><div class="stat-label">å¹¸è¿</div><div class="stat-value" id="luck">50</div><div class="stat-bar"><div class="stat-fill" id="luckBar" style="width:50%; background:#ffd700"></div></div></div>
            <div class="stat-item"><div class="stat-label">å£°æœ›</div><div class="stat-value" id="fame">0</div></div>
        </div>
        <div class="main-area">
            <div class="left-panel">
                <div class="panel">
                    <div class="avatar" id="avatar">ğŸ‘¶</div>
                    <div class="char-name" id="charName">å©´å„¿</div>
                    <div class="char-info" id="charInfo">0å²</div>
                </div>
                <div class="panel">
                    <div class="panel-title">ğŸ¯ æŠ€èƒ½</div>
                    <div class="skills-list" id="skillsList"><span class="skill-tag">æ— </span></div>
                </div>
                <div class="panel">
                    <div class="panel-title">ğŸ“œ äººç”Ÿç»å†</div>
                    <div class="event-log" id="eventLog"><div class="event-item">ğŸŒŸ ä½ å‡ºç”Ÿäº†...</div></div>
                </div>
            </div>
            <div class="center-area">
                <div class="story-panel">
                    <div class="scene-image" id="sceneImage">ğŸ¥</div>
                    <div class="npc-area">
                        <div class="npc-avatar" id="npcAvatar">ğŸ‘©</div>
                        <div class="dialogue-box">
                            <div class="npc-name" id="npcName">å¦ˆå¦ˆ</div>
                            <div class="dialogue-text" id="dialogueText">å®è´ï¼Œæ¬¢è¿æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼</div>
                        </div>
                    </div>
                </div>
                <div class="choices-panel" id="choicesPanel">
                    <div class="choices-title">âœ¨ ä½ å†³å®šï¼š</div>
                    <div id="choicesList"></div>
                    <div class="free-input">
                        <input type="text" id="freeInput" placeholder="ğŸ’¬ è¾“å…¥ä½ çš„æƒ³æ³•ï¼ŒAIä¼šç”Ÿæˆä¸ªæ€§åŒ–é€‰æ‹©...">
                        <button id="submitBtn">æäº¤</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var gameState = { age: 0, health: 100, money: 0, intelligence: 50, charm: 50, luck: 50, fame: 0, skills: [], events: [], job: "å©´å„¿", relationship: 0, careerLevel: 0, history: [] };

        var events = {
            0: { npc: "å¦ˆå¦ˆ", scene: "ğŸ¥", avatar: "ğŸ‘©", dialogue: "å®è´ï¼Œæ¬¢è¿æ¥åˆ°è¿™ä¸ªä¸–ç•Œï¼", choices: [
                { text: "å¥åº·æˆé•¿", effect: { health: 10 }, result: "ä½ å¥åº·æˆé•¿ç€ã€‚" },
                { text: "å“­é—¹è¡¨è¾¾", effect: { charm: 5 }, result: "ä½ ç”¨å“­é—¹æ¥è¡¨è¾¾éœ€æ±‚ã€‚" },
                { text: "å®‰é™ç¡è§‰", effect: { health: 5 }, result: "ä½ å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç¡è§‰ã€‚" },
                { text: "å¥½å¥‡è§‚å¯Ÿ", effect: { intelligence: 5 }, result: "ä½ å¥½å¥‡åœ°è§‚å¯Ÿç€ä¸–ç•Œã€‚" }
            ]},
            3: { npc: "çˆ¸çˆ¸", scene: "ğŸ ", avatar: "ğŸ‘¨", dialogue: "3å²äº†ï¼Œè¯¥å­¦ç‚¹ä»€ä¹ˆäº†ã€‚", choices: [
                { text: "ç©ç©å…·è½¦", effect: { intelligence: 10, skill: "æœºæ¢°å…´è¶£" }, result: "ä½ å±•ç°æœºæ¢°å¤©èµ‹ï¼" },
                { text: "ç”»ç”»", effect: { intelligence: 5, skill: "ç»˜ç”»å…´è¶£" }, result: "ä½ å–œæ¬¢ç”»ç”»ã€‚" },
                { text: "å’Œå…¶ä»–å°æœ‹å‹ç©", effect: { charm: 10, skill: "ç¤¾äº¤" }, result: "ä½ äº¤åˆ°äº†ç¬¬ä¸€ä¸ªæœ‹å‹ï¼" },
                { text: "å¬æ•…äº‹", effect: { intelligence: 10 }, result: "ä½ å¾ˆå–œæ¬¢å¬æ•…äº‹ã€‚" }
            ]},
            6: { npc: "è€å¸ˆ", scene: "ğŸ«", avatar: "ğŸ‘¨â€ğŸ«", dialogue: "ä¸Šå°å­¦äº†ï¼ä½ æœ€å–œæ¬¢å“ªé—¨è¯¾ï¼Ÿ", choices: [
                { text: "æ•°å­¦è¯¾", effect: { intelligence: 15, skill: "æ•°å­¦" }, result: "ä½ å±•ç°äº†æ•°å­¦å¤©èµ‹ï¼" },
                { text: "è¯­æ–‡è¯¾", effect: { intelligence: 10, skill: "è¯­æ–‡" }, result: "ä½ çˆ±ä¸Šäº†é˜…è¯»ã€‚" },
                { text: "ä½“è‚²è¯¾", effect: { health: 15, skill: "è¿åŠ¨" }, result: "ä½ è¿åŠ¨èƒ½åŠ›å¾ˆå¼ºï¼" },
                { text: "éŸ³ä¹è¯¾", effect: { charm: 10, skill: "éŸ³ä¹" }, result: "ä½ å¯¹éŸ³ä¹å¾ˆæœ‰å…´è¶£ã€‚" }
            ]},
            9: { npc: "ç­ä¸»ä»»", scene: "ğŸ«", avatar: "ğŸ‘©â€ğŸ«", dialogue: "æœ€è¿‘å­¦ä¹ æ€ä¹ˆæ ·ï¼Ÿ", choices: [
                { text: "å‚åŠ å¥¥æ•°ç­", effect: { intelligence: 15, money: -2000, skill: "ç«èµ›æ•°å­¦" }, result: "ä½ å¥¥æ•°è·å¥–äº†ï¼" },
                { text: "å­¦é’¢ç´", effect: { charm: 10, money: -3000, skill: "é’¢ç´" }, result: "ä½ å­¦ä¼šäº†å¼¹é’¢ç´ï¼" },
                { text: "è¸¢è¶³çƒ", effect: { health: 10, skill: "è¶³çƒ" }, result: "ä½ æˆäº†è¶³çƒé˜Ÿä¸»åŠ›ï¼" },
                { text: "çœ‹è¯¾å¤–ä¹¦", effect: { intelligence: 10, skill: "é˜…è¯»" }, result: "ä½ è¯»äº†å¾ˆå¤šè¯¾å¤–ä¹¦ã€‚" }
            ]},
            12: { npc: "åŒå­¦", scene: "ğŸ«", avatar: "ğŸ‘«", dialogue: "åˆä¸­äº†ï¼", choices: [
                { text: "åŠªåŠ›å­¦ä¹ ", effect: { intelligence: 15, fame: 5 }, result: "ä½ æˆç»©ä¼˜å¼‚ï¼" },
                { text: "æ‰“ç¯®çƒ", effect: { health: 15, skill: "ç¯®çƒ", charm: 10 }, result: "ä½ æˆäº†ç¯®çƒé˜Ÿé•¿ï¼" },
                { text: "è¿½æ˜æ˜Ÿ", effect: { charm: 5, fame: 10 }, result: "ä½ æ˜¯è¿½æ˜Ÿæ—ã€‚" },
                { text: "ä¸Šç½‘èŠå¤©", effect: { intelligence: -5, skill: "ç”µè„‘" }, result: "ä½ å­¦ä¼šäº†ä¸Šç½‘ã€‚" }
            ]},
            15: { npc: "å®¶é•¿", scene: "ğŸ ", avatar: "ğŸ‘¨â€ğŸ‘©", dialogue: "é«˜ä¸­äº†ï¼è¦è€ƒå¤§å­¦äº†ã€‚", choices: [
                { text: "ä¸“å¿ƒå¤‡è€ƒ", effect: { intelligence: 20, money: -5000 }, result: "ä½ åˆ»è‹¦å­¦ä¹ ã€‚" },
                { text: "å‚åŠ ç«èµ›", effect: { fame: 15, intelligence: 10, skill: "ç«èµ›" }, result: "ä½ è·å¾—äº†ç«èµ›å¥–é¡¹ï¼" },
                { text: "è°ˆæ‹çˆ±", effect: { relationship: 20, charm: 10 }, result: "ä½ å¼€å§‹äº†ç¬¬ä¸€æ®µæ‹æƒ…ã€‚" },
                { text: "å‘å±•å…´è¶£", effect: { skill: "å…´è¶£ç‰¹é•¿", charm: 10 }, result: "ä½ å‘å±•äº†å…´è¶£çˆ±å¥½ã€‚" }
            ]},
            18: { npc: "çˆ¶äº²", scene: "ğŸ ", avatar: "ğŸ‘¨", dialogue: "å­©å­ï¼Œä½ 18å²äº†ï¼Œè¯¥åšå†³å®šäº†ã€‚", choices: [
                { text: "æ‰¾ä¸€ä»½ç¨³å®šçš„å·¥ä½œ", effect: { money: 3000, skill: "å·¥ä½œç»éªŒ", job: "èŒå‘˜", career: 1 }, result: "ä½ æ‰¾åˆ°äº†ç¨³å®šå·¥ä½œã€‚" },
                { text: "ç»§ç»­æ·±é€ ï¼Œè€ƒå¤§å­¦", effect: { money: -5000, intelligence: 15, skill: "é«˜ç­‰æ•™è‚²" }, result: "ä½ æˆåŠŸè€ƒå…¥å¤§å­¦ï¼" },
                { text: "åˆ›ä¸šï¼Œåšä¸€ç•ªå¤§äº‹ä¸š", effect: { luck: 55, skill: "åˆ›ä¸šç»éªŒ" }, result: "ä½ å¼€å§‹äº†åˆ›ä¸šä¹‹è·¯..." },
                { text: "å»æ—…è¡Œï¼Œå¯»æ‰¾äººç”Ÿæ„ä¹‰", effect: { charm: 10, money: -3000, skill: "æ—…è¡Œç»éªŒ" }, result: "ä½ è¸ä¸Šäº†æ—…é€”ã€‚" }
            ]},
            21: { npc: "å­¦é•¿", scene: "ğŸ«", avatar: "ğŸ‘¨â€ğŸ“", dialogue: "å…„å¼Ÿï¼Œæœ‰ä¸ªæœºä¼šï¼", choices: [
                { text: "å‚åŠ åˆ›ä¸šæ¯”èµ›", condition: function() { return gameState.intelligence > 55; }, effect: { fame: 20, money: 5000 }, result: "é¡¹ç›®è·å¥–äº†ï¼" },
                { text: "å»å…¬å¸å®ä¹ ", condition: function() { return gameState.skills.indexOf('å·¥ä½œç»éªŒ') !== -1; }, effect: { money: 2000, skill: "å®ä¹ ç»éªŒ", career: 1 }, result: "å®ä¹ è¡¨ç°ä¸é”™ã€‚" },
                { text: "åŠ å…¥ç¤¾å›¢", effect: { charm: 10, skill: "ç¤¾äº¤" }, result: "ä½ è®¤è¯†äº†å¾ˆå¤šæ–°æœ‹å‹ã€‚" },
                { text: "ä¸“æ³¨å­¦ä¹ ", effect: { intelligence: 5 }, result: "æˆç»©æé«˜äº†ã€‚" }
            ]},
            24: { npc: "ä¸Šå¸", scene: "ğŸ¢", avatar: "ğŸ‘¨â€ğŸ’¼", dialogue: "æœ‰ä¸ªæ™‹å‡æœºä¼šï¼Œæƒ³äº‰å–å—ï¼Ÿ", choices: [
                { text: "æŠ“ä½æœºä¼š", effect: { career: 3, fame: 20, money: 10000 }, result: "ä½ æˆåŠŸæ™‹å‡äº†ï¼" },
                { text: "ç¨³æ­¥å‘å±•", effect: { career: 1, skill: "ä¸“ä¸šæŠ€èƒ½" }, result: "ä½ ç¨³æ­¥å‘å±•ã€‚" },
                { text: "å¼€æ‹“å‰¯ä¸š", effect: { money: 5000, skill: "å‰¯ä¸š" }, result: "ä½ å¼€å§‹åšå‰¯ä¸šã€‚" },
                { text: "å»ºç«‹äººè„‰", effect: { charm: 10, fame: 10 }, result: "ä½ è®¤è¯†äº†å¾ˆå¤šäººã€‚" }
            ]},
            27: { npc: "æœ‹å‹", scene: "ğŸ‰", avatar: "ğŸ‘«", dialogue: "æœ‰ä¸ªäººæƒ³ä»‹ç»ç»™ä½ è®¤è¯†ã€‚", choices: [
                { text: "æ¥å—è¡¨ç™½", condition: function() { return gameState.relationship > 30; }, effect: { relationship: 50, charm: 10 }, result: "ä½ ä»¬åœ¨ä¸€èµ·äº†ï¼" },
                { text: "ä¸“æ³¨äº‹ä¸š", effect: { money: 10000, career: 2 }, result: "ä½ ä¸“æ³¨äºäº‹ä¸šã€‚" },
                { text: "å­¦ä¹ æ–°æŠ€èƒ½", effect: { intelligence: 10, skill: "æ–°æŠ€èƒ½" }, result: "ä½ å­¦ä¼šäº†æ–°æŠ€èƒ½ã€‚" },
                { text: "æ‹“å±•ç¤¾äº¤", effect: { charm: 15, fame: 10 }, result: "ç¤¾äº¤åœˆè¶Šæ¥è¶Šå¤§äº†ã€‚" }
            ]},
            30: { npc: "é…å¶", scene: "ğŸ ", avatar: "ğŸ’‘", dialogue: "æˆ‘ä»¬ç»“å©šå§ï¼", choices: [
                { text: "ç»“å©š", condition: function() { return gameState.relationship > 50; }, effect: { relationship: 50, health: 10, money: -20000 }, result: "ä½ ä»¬ä¸¾è¡Œäº†å©šç¤¼ï¼" },
                { text: "æ±‚å©š", condition: function() { return gameState.relationship > 30; }, effect: { relationship: 40, money: -10000 }, result: "æ±‚å©šæˆåŠŸï¼" },
                { text: "ä¸“æ³¨äº‹ä¸š", effect: { career: 3, money: 30000 }, result: "äº‹ä¸šè’¸è’¸æ—¥ä¸Šï¼" },
                { text: "å­¦ä¹ è¿›ä¿®", effect: { intelligence: 20, skill: "ä¸“ä¸šè®¤è¯" }, result: "è·å¾—äº†ä¸“ä¸šè®¤è¯ï¼" }
            ]},
            35: { npc: "é…å¶", scene: "ğŸ ", avatar: "ğŸ‘«", dialogue: "å­©å­è¦ä¸Šå­¦äº†ï¼Œè¦è€ƒè™‘å­¦åŒºæˆ¿...", choices: [
                { text: "ä¹°å­¦åŒºæˆ¿", effect: { money: -50000, fame: 10 }, result: "ä¹°äº†å­¦åŒºæˆ¿ã€‚" },
                { text: "ä¿æŒç°çŠ¶", effect: { health: 10, relationship: 10 }, result: "æ³¨é‡å®¶åº­é™ªä¼´ã€‚" },
                { text: "å‘å±•å‰¯ä¸š", effect: { money: 20000, health: -10, skill: "å‰¯ä¸š" }, result: "å‰¯ä¸šå‘å±•ä¸é”™ã€‚" },
                { text: "æŠ•èµ„ç†è´¢", effect: { money: Math.floor(Math.random() * 30000), skill: "æŠ•èµ„" }, result: "æŠ•èµ„æ”¶ç›Šä¸é”™ã€‚" }
            ]},
            40: { npc: "åŒäº‹", scene: "ğŸ¢", avatar: "ğŸ‘”", dialogue: "å…¬å¸è¦è£å‘˜äº†...", choices: [
                { text: "åšå®ˆå²—ä½", effect: { career: 2, fame: 10 }, result: "ä½ ç•™åœ¨äº†å…¬å¸ã€‚" },
                { text: "ä¸»åŠ¨ç¦»èŒåˆ›ä¸š", condition: function() { return gameState.money > 30000; }, effect: { money: -30000, job: "åˆ›ä¸šè€…", fame: 20 }, result: "ä½ å†³å®šè‡ªå·±åˆ›ä¸šï¼" },
                { text: "å­¦ä¹ æ–°æŠ€èƒ½", effect: { intelligence: 15, skill: "æ–°æŠ€èƒ½" }, result: "ä½ å­¦ä¼šäº†æ–°æŠ€èƒ½ã€‚" },
                { text: "ä¼‘æ¯ä¸€æ®µæ—¶é—´", effect: { health: 20 }, result: "ä½ å¥½å¥½ä¼‘æ¯äº†ã€‚" }
            ]},
            50: { npc: "è€æœ‹å‹", scene: "ğŸ‰", avatar: "ğŸ‘´", dialogue: "è€ç‹ï¼Œæœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ", choices: [
                { text: "åˆ†äº«æˆåŠŸç»éªŒ", effect: { fame: 20 }, result: "ä½ åˆ†äº«äº†ç»éªŒã€‚" },
                { text: "äº«å—ç”Ÿæ´»", effect: { health: 15, money: -10000 }, result: "ä½ å¼€å§‹äº«å—ç”Ÿæ´»ã€‚" },
                { text: "æŠ•èº«æ…ˆå–„", effect: { fame: 25, money: -20000 }, result: "ä½ åšèµ·äº†æ…ˆå–„ã€‚" },
                { text: "ç»§ç»­å¥‹æ–—", effect: { money: 30000, health: -10 }, result: "ä½ ç»§ç»­æ‹¼æã€‚" }
            ]},
            60: { npc: "å­å¥³", scene: "ğŸ ", avatar: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§", dialogue: "çˆ¸/å¦ˆï¼Œè¯¥ä¼‘æ¯äº†ã€‚", choices: [
                { text: "å†™å›å¿†å½•", effect: { fame: 15, intelligence: 10 }, result: "ä½ å¼€å§‹å†™å›å¿†å½•ã€‚" },
                { text: "å«é¥´å¼„å­™", effect: { health: 15, relationship: 20 }, result: "ä½ äº«å—å¤©ä¼¦ä¹‹ä¹ã€‚" },
                { text: "å‘¨æ¸¸ä¸–ç•Œ", effect: { money: -50000, charm: 20 }, result: "ä½ å»å‘¨æ¸¸ä¸–ç•Œäº†ã€‚" },
                { text: "ç§èŠ±å…»è‰", effect: { health: 20 }, result: "ä½ è¿‡èµ·æ‚ é—²ç”Ÿæ´»ã€‚" }
            ]}
        };

        function getDefaultEvent(age) {
            var npcs = ["æœ‹å‹", "åŒäº‹", "å®¶äºº"];
            var scenes = ["ğŸ¢", "ğŸ ", "ğŸŒ³"];
            var npc = npcs[age % 3];
            return {
                npc: npc,
                scene: scenes[age % 3],
                avatar: "ğŸ‘¤",
                dialogue: "ä»Šå¹´ä½ " + age + "å²äº†ï¼Œç”Ÿæ´»ä¸­é‡åˆ°äº†ä¸€ä¸ªæ–°çš„é€‰æ‹©...",
                choices: [
                    { text: "åŠªåŠ›å·¥ä½œ", effect: { money: 10000, career: 1, health: -5 }, result: "ä½ åŠªåŠ›å·¥ä½œï¼Œæ”¶å…¥å¢åŠ äº†ã€‚" },
                    { text: "é™ªä¼´å®¶äºº", effect: { health: 10, relationship: 10 }, result: "ä½ å’Œå®¶äººåœ¨ä¸€èµ·çš„æ—¶å…‰å¾ˆå¹¸ç¦ã€‚" },
                    { text: "æŠ•èµ„ç†è´¢", effect: { money: Math.floor(Math.random() * 20000 - 5000), skill: "æŠ•èµ„" }, result: "æŠ•èµ„æ”¶ç›Šæœ‰ç›ˆäºã€‚" },
                    { text: "å­¦ä¹ æ–°çŸ¥è¯†", effect: { intelligence: 10, skill: "æ–°æŠ€èƒ½" }, result: "ä½ å­¦ä¼šäº†æ–°æŠ€èƒ½ï¼" }
                ]
            };
        }

        function getCurrentEvent() {
            var evt = events[gameState.age];
            return evt || getDefaultEvent(gameState.age);
        }

        function getValidChoices(evt) {
            if (!evt || !evt.choices) return [];
            return evt.choices.filter(function(c) {
                if (!c.condition) return true;
                try { return c.condition(); } catch(e) { return true; }
            });
        }

        function applyEffect(effect) {
            if (!effect) return;
            if (effect.money) gameState.money += effect.money;
            if (effect.health) gameState.health += effect.health;
            if (effect.intelligence) gameState.intelligence += effect.intelligence;
            if (effect.charm) gameState.charm += effect.charm;
            if (effect.luck) gameState.luck += effect.luck;
            if (effect.fame) gameState.fame += effect.fame;
            if (effect.career) gameState.careerLevel += effect.career;
            if (effect.relationship) gameState.relationship += effect.relationship;
            if (effect.job) gameState.job = effect.job;
            if (effect.skill && gameState.skills.indexOf(effect.skill) === -1) gameState.skills.push(effect.skill);
            gameState.health = Math.max(0, Math.min(100, gameState.health));
            gameState.intelligence = Math.max(0, Math.min(100, gameState.intelligence));
            gameState.charm = Math.max(0, Math.min(100, gameState.charm));
            gameState.luck = Math.max(0, Math.min(100, gameState.luck));
        }

        function checkGameOver() {
            if (gameState.health <= 0) { alert('ğŸ’€ æ¸¸æˆç»“æŸï¼\n\næœ€ç»ˆè¯„åˆ†: ' + calculateScore()); return true; }
            if (gameState.money < -50000) { alert('ğŸ’¸ è´Ÿå€ºè¿‡å¤šï¼Œæ¸¸æˆç»“æŸï¼\n\næœ€ç»ˆè¯„åˆ†: ' + calculateScore()); return true; }
            return false;
        }

        function calculateScore() {
            var s = 0;
            s += gameState.health;
            s += Math.min(gameState.money / 500, 50);
            s += gameState.intelligence;
            s += gameState.charm;
            s += gameState.luck;
            s += gameState.fame;
            s += gameState.skills.length * 5;
            s += gameState.relationship;
            return Math.floor(s);
        }

        function showEnding() {
            var score = calculateScore();
            var ending = "", emoji = "";
            if (score >= 500) { ending = "ğŸŒŸ ä¼ å¥‡äººç”Ÿ - ä½ çš„æ•…äº‹å°†è¢«äººä»¬ä¼ é¢‚ï¼"; emoji = "ğŸ‘‘"; }
            else if (score >= 400) { ending = "ğŸ† æˆåŠŸäººå£« - ä½ å®ç°äº†ç†æƒ³ï¼"; emoji = "ğŸ’"; }
            else if (score >= 300) { ending = "ğŸ‘ å……å®äººç”Ÿ - ä½ æ‹¥æœ‰äº†ç²¾å½©äººç”Ÿï¼"; emoji = "â­"; }
            else if (score >= 200) { ending = "ğŸ˜Š æ™®é€šç”Ÿæ´» - å¹³æ·¡ä¹Ÿæ˜¯å¹¸ç¦ã€‚"; emoji = "ğŸŒ¸"; }
            else { ending = "ğŸ¤” å¹³å‡¡æ˜¯çœŸ - ä½ åº¦è¿‡äº†ç®€å•çœŸå®çš„ä¸€ç”Ÿã€‚"; emoji = "ğŸ€"; }
            alert('ğŸ® æ¸¸æˆç»“æŸï¼\n\n' + emoji + ' ' + ending + '\n\næœ€ç»ˆè¯„åˆ†: ' + score + '\n\næ„Ÿè°¢æ¸¸ç©ï¼');
        }

        function makeChoice(index) {
            var evt = getCurrentEvent();
            var validChoices = getValidChoices(evt);
            if (index >= validChoices.length) return;
            var choice = validChoices[index];
            applyEffect(choice.effect);
            gameState.events.push({ age: gameState.age, event: choice.text });
            if (choice.text.indexOf('å¤§å­¦') !== -1) gameState.history.push('å¤§å­¦');
            if (choice.text.indexOf('åˆ›ä¸š') !== -1) gameState.history.push('åˆ›ä¸š');
            if (choice.text.indexOf('ç»“å©š') !== -1) gameState.history.push('ç»“å©š');
            if (checkGameOver()) return;
            gameState.age++;
            if (gameState.age > 65) { showEnding(); return; }
            showResult(choice.result);
        }

        function showResult(text) {
            var panel = document.getElementById('choicesPanel');
            panel.innerHTML = '<div class="result-box"><div class="result-title">ğŸ“ ä»Šå¹´çš„æ”¶è·</div><div class="result-text">' + text + '</div></div>' +
                '<button class="choice-btn" id="continueBtn" style="background:linear-gradient(135deg,#00ff88,#00ccff);color:#000;font-weight:bold;">è¿›å…¥ä¸‹ä¸€å¹´ â†’</button>' +
                '<div class="free-input"><input type="text" id="freeInput" placeholder="ğŸ’¬ è¾“å…¥ä½ çš„æƒ³æ³•..."><button id="submitBtn2">æäº¤</button></div>';
            document.getElementById('continueBtn').onclick = continueGame;
            document.getElementById('submitBtn2').onclick = submitFreeChoice;
        }

        function continueGame() { updateUI(); }

        function submitFreeChoice() {
            var input = document.getElementById('freeInput').value.trim();
            if (!input) { alert('è¯·è¾“å…¥ä½ çš„æƒ³æ³•ï¼'); return; }
            var choices = generateAIChoice(input);
            var choice = choices[0];
            applyEffect(choice.effect);
            gameState.events.push({ age: gameState.age, event: input });
            if (checkGameOver()) return;
            gameState.age++;
            if (gameState.age > 65) { showEnding(); return; }
            showResult(choice.result);
        }

        function generateAIChoice(input) {
            var l = input.toLowerCase();
            var effect = {}, result = "";
            if (l.indexOf('å·¥ä½œ') !== -1) { effect = { money: 5000 + gameState.careerLevel * 1000, career: 1 }; result = "ä½ æ‰¾åˆ°äº†å·¥ä½œã€‚"; }
            else if (l.indexOf('å­¦ä¹ ') !== -1) { effect = { intelligence: 10, money: -2000 }; result = "ä½ åŠªåŠ›å­¦ä¹ ã€‚"; }
            else if (l.indexOf('åˆ›ä¸š') !== -1) { effect = { money: 10000, fame: 10 }; result = "ä½ å¼€å§‹åˆ›ä¸šã€‚"; }
            else if (l.indexOf('æ—…è¡Œ') !== -1) { effect = { charm: 10, money: -5000, health: 5 }; result = "ä½ å‡ºå»æ—…è¡Œäº†ï¼"; }
            else if (l.indexOf('å¥èº«') !== -1 || l.indexOf('è¿åŠ¨') !== -1) { effect = { health: 15 }; result = "ä½ é”»ç‚¼èº«ä½“ï¼"; }
            else if (l.indexOf('ç¤¾äº¤') !== -1 || l.indexOf('è®¤è¯†') !== -1) { effect = { charm: 10, fame: 5 }; result = "è®¤è¯†äº†æ–°æœ‹å‹ã€‚"; }
            else if (l.indexOf('æŠ•èµ„') !== -1 || l.indexOf('ç†è´¢') !== -1) { var g = Math.floor(Math.random() * 20000); effect = { money: g }; result = g > 0 ? "èµšäº†" + g + "å…ƒï¼" : "æœ‰äºæŸã€‚"; }
            else { effect = { money: 2000, health: 5 }; result = "åº¦è¿‡äº†å……å®çš„ä¸€å¹´ã€‚"; }
            return [{ text: input, effect: effect, result: result }];
        }

        function updateUI() {
            document.getElementById('yearDisplay').textContent = 'ğŸ‚ ç¬¬ ' + gameState.age + ' å¹´';
            document.getElementById('health').textContent = gameState.health;
            document.getElementById('money').textContent = 'Â¥' + gameState.money.toLocaleString();
            document.getElementById('intelligence').textContent = gameState.intelligence;
            document.getElementById('charm').textContent = gameState.charm;
            document.getElementById('luck').textContent = gameState.luck;
            document.getElementById('fame').textContent = gameState.fame;
            document.getElementById('healthBar').style.width = Math.min(100, gameState.health) + '%';
            document.getElementById('intBar').style.width = Math.min(100, gameState.intelligence) + '%';
            document.getElementById('charmBar').style.width = Math.min(100, gameState.charm) + '%';
            document.getElementById('luckBar').style.width = Math.min(100, gameState.luck) + '%';
            var avatars = ["ğŸ‘¶","ğŸ‘¶","ğŸ‘¶","ğŸ‘§","ğŸ‘§","ğŸ‘§","ğŸ‘¦","ğŸ‘¦","ğŸ‘¦","ğŸ§‘","ğŸ§‘","ğŸ§‘","ğŸ‘±","ğŸ‘±","ğŸ‘±","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨","ğŸ‘¨"];
            var names = ["å©´å„¿","å©´å„¿","å©´å„¿","å¹¼å„¿","å¹¼å„¿","å¹¼å„¿","å„¿ç«¥","å„¿ç«¥","å„¿ç«¥","å°‘å¹´","å°‘å¹´","å°‘å¹´","é’å¹´","é’å¹´","é’å¹´","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","æˆäºº","ä¸­å¹´äºº","ä¸­å¹´äºº"];
            var ai = Math.min(Math.floor(gameState.age / 3), avatars.length - 1);
            document.getElementById('avatar').textContent = avatars[ai];
            document.getElementById('charName').textContent = names[ai];
            document.getElementById('charInfo').textContent = gameState.age + 'å² Â· ' + gameState.job;
            document.getElementById('skillsList').innerHTML = gameState.skills.length ? gameState.skills.map(function(s) { return '<span class="skill-tag">' + s + '</span>'; }).join('') : '<span class="skill-tag">æ— </span>';
            document.getElementById('eventLog').innerHTML = gameState.events.slice(-5).map(function(e) { return '<div class="event-item">ğŸŒŸ <span style="color:#00ff88">' + e.age + 'å²</span> - ' + e.event + '</div>'; }).join('');
            var evt = getCurrentEvent();
            document.getElementById('sceneImage').textContent = evt.scene;
            document.getElementById('npcAvatar').textContent = evt.avatar;
            document.getElementById('npcName').textContent = evt.npc;
            document.getElementById('dialogueText').textContent = evt.dialogue;
            var validChoices = getValidChoices(evt);
            document.getElementById('choicesList').innerHTML = validChoices.map(function(c, i) { return '<button class="choice-btn" data-index="' + i + '">' + c.text + '</button>'; }).join('');
            var buttons = document.querySelectorAll('#choicesList .choice-btn');
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].onclick = (function(idx) { return function() { makeChoice(idx); }; })(i);
            }
        }

        document.getElementById('submitBtn').onclick = submitFreeChoice;
        updateUI();
    </script>
</body>
</html>
